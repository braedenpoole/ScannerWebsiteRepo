<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <title>Market Scanner</title>
        <link rel="icon" href="Images/scannerLogo.png" type="image/x-icon">

    </head>

    <body class="bg-gray-300">
        <div>
            <!--Navbar-->
            <div id="indicesBar" class="fixed top-0 w-screen justify-center flex items-center space-x-8 h-14 px-5 lg:px-0 drop-shadow-xl bg-black" style="z-index: 999;">
                <!-- Navbar Logo and Hamburger Menu Icon -->
                <div class="items-center">
                    <div class="text-2xl text-white font-semibold hover:bg-gray-700">
                        <a href="https://www.braedenpoole.com/index.html" class="px-6 py-2 hover:bg-gray-700" target="_blank">My Portfolio</a>
                    </div>
                </div>
                <!--Mobile Indicies-->
                <div id="menu-toggle" class="block md:hidden">
                    <button class="px-6 py-2 hover:bg-gray-700 font-semibold text-2xl">
                        <div class="text-white font-semibold">Indices</div>
                    </button>
                </div>

            
                <!-- Index Prices Container -->
                <div id="index-prices-container" class="hidden justify-end md:flex text-lg font-semibold md:space-x-3 lg:space-x-12 text-center pr-12">
                    <!-- Index prices will be populated here -->
                </div>
            </div>

            <div id="dropdown-index-container" class="pt-14 hidden justify-center w-full bg-black text-lg font-semibol text-center" style="z-index: 998;">
                <!-- Index prices will be populated here -->
            </div>
        </div>
        
        <div class="text-xl font-bold text-center pt-16 bg-gray-300">Cryptocurrency Data</div>

        <!--First Container for Crypto Boxes-->
        <section id="topPage" class="h-full w-full overflow-auto bg-gray-300 pt-2 flex justify-center items-center">
            <div id="allBoxes" class="h-3/4 w-5/6 md:h-5/6 bg-gray-300 flex justify-center items-center overflow-auto">
                <div class=" overflow-auto grid-cols-10 gap-6 flex w-full h-full p-3">
                    <!-- Column 1 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top Market Cap</div>
                        <div id="mc1" class=""></div>
                        <div id="mc2" class=""></div>
                        <div id="mc3" class=""></div>
                        <div id="mc4" class=""></div>
                        <div id="mc5" class=""></div>
                    </div>

                    <!-- Column 2 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Largest 24h Gain</div>
                        <div id="g1" class=""></div>
                        <div id="g2" class=""></div>
                        <div id="g3" class=""></div>
                        <div id="g4" class=""></div>
                        <div id="g5" class=""></div>
                    </div>

                    <!-- Column 3 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Largest 24h Loss</div>
                        <div id="l1" class=""></div>
                        <div id="l2" class=""></div>
                        <div id="l3" class=""></div>
                        <div id="l4" class=""></div>
                        <div id="l5" class=""></div>
                    </div>

                    <!-- Column 4 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Largest 1h Gain</div>
                        <div id="lg1" class=""></div>
                        <div id="lg2" class=""></div>
                        <div id="lg3" class=""></div>
                        <div id="lg4" class=""></div>
                        <div id="lg5" class=""></div>
                    </div>

                    <!-- Column 5 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Largest 1h Loss</div>
                        <div id="ll1" class=""></div>
                        <div id="ll2" class=""></div>
                        <div id="ll3" class=""></div>
                        <div id="ll4" class=""></div>
                        <div id="ll5" class=""></div>
                    </div>  
                    
                    <!-- Column 6 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top AI</div>
                        <div id="ai1" class=""></div><!--Tao-->
                        <div id="ai2" class=""></div><!--Rndr-->
                        <div id="ai3" class=""></div><!--Fet-->
                        <div id="ai4" class=""></div><!--Agix-->
                        <div id="ai5" class=""></div><!--Akt-->
                    </div>

                    <!-- Column 7 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top Meme</div>
                        <div id="m1" class=""></div><!--Doge-->
                        <div id="m2" class=""></div><!--Shiba-->
                        <div id="m3" class=""></div><!--Pepe-->
                        <div id="m4" class=""></div><!--Bonk-->
                        <div id="m5" class=""></div><!--dogwifhat-->
                    </div>

                    <!-- Column 8 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top Gaming</div>
                        <div id="tg1" class=""></div><!--IMX-->
                        <div id="tg2" class=""></div><!--Beam-->
                        <div id="tg3" class=""></div><!--Sand-->
                        <div id="tg4" class=""></div><!--Gala-->
                        <div id="tg5" class=""></div><!--Axs-->
                    </div>
                    
                    <!-- Column 9 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top DeFi</div>
                        <div id="df1" class=""></div><!--Uniswap-->
                        <div id="df2" class=""></div><!--Chainlink-->
                        <div id="df3" class=""></div><!--Dai-->
                        <div id="df4" class=""></div><!--The Graph-->
                        <div id="df5" class=""></div><!--SNX-->
                    </div>

                    <!-- Column 10 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top Layer 2's</div>
                        <div id="tl1" class=""></div><!--Polygon-->
                        <div id="tl2" class=""></div><!--Optimism-->
                        <div id="tl3" class=""></div><!--Mantle-->
                        <div id="tl4" class=""></div><!--Arbitrum-->
                        <div id="tl5" class=""></div><!--Starknet-->
                    </div>
                </div>
            </div>
        </section>

        <!--Color Key-->
        <div class="h-2 bg-gray-300"></div>
        <div class="h-4 w-full bg-gray-300 flex justify-center text-center">
            <div class="pr-4 text-right w-1/4 text-xs font-semibold">24 Hour Negative</div>
            <div class="w-1/2 h-full" style="background:linear-gradient(to right, #E55451, #FFB8BF, #A0D6B4, #54C571 )"></div>
            <div class="pl-4 text-left w-1/4 text-xs font-semibold">24 Hour Positive</div>
        </div>

        <div class="text-xl font-bold pt-10 text-center bg-gray-300">Stock Market Data</div>
        <!--Second Container for Stock Market Boxes-->
        <section id="secondPage" class="h-full w-full overflow-auto bg-gray-300 pt-2 flex justify-center items-center">
        
            <div id="allBoxes" class="h-3/4 w-5/6 md:h-5/6 bg-gray-300 flex justify-center items-center overflow-auto">
                <div class=" overflow-auto grid-cols-8 gap-6 flex w-full h-full p-3">
                    <!-- Column 1 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top Tech</div>
                        <div id="toptech1" class=""></div>
                        <div id="toptech2" class=""></div>
                        <div id="toptech3" class=""></div>
                        <div id="toptech4" class=""></div>
                        <div id="toptech5" class=""></div>
                    </div>

                    <!-- Column 2 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top EV</div>
                        <div id="ev1" class=""></div>
                        <div id="ev2" class=""></div>
                        <div id="ev3" class=""></div>
                        <div id="ev4" class=""></div>
                        <div id="ev5" class=""></div>
                    </div>

                    <!-- Column 3 -->
                    <div class="flex flex-col space-y-1 text-center pr-5">
                        <div class="pb-1 font-semibold text-lg">Top Chip Makers</div>
                        <div id="cm1" class=""></div>
                        <div id="cm2" class=""></div>
                        <div id="cm3" class=""></div>
                        <div id="cm4" class=""></div>
                        <div id="cm5" class=""></div>
                    </div>

                    <!-- Column 4 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top Crypto Miners</div>
                        <div id="miner1" class=""></div>
                        <div id="miner2" class=""></div>
                        <div id="miner3" class=""></div>
                        <div id="miner4" class=""></div>
                        <div id="miner5" class=""></div>
                    </div>

                    <!-- Column 5 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top AI</div>
                        <div id="aistock1" class=""></div>
                        <div id="aistock2" class=""></div>
                        <div id="aistock3" class=""></div>
                        <div id="aistock4" class=""></div>
                        <div id="aistock5" class=""></div>
                    </div>
                    <!-- Column 6 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top Energy</div>
                        <div id="te1" class=""></div>
                        <div id="te2" class=""></div>
                        <div id="te3" class=""></div>
                        <div id="te4" class=""></div>
                        <div id="te5" class=""></div>
                    </div>
                    <!-- Column 7 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top Banking</div>
                        <div id="tb1" class=""></div>
                        <div id="tb2" class=""></div>
                        <div id="tb3" class=""></div>
                        <div id="tb4" class=""></div>
                        <div id="tb5" class=""></div>
                    </div>
                    <!-- Column 8 -->
                    <div class="flex flex-col space-y-1 text-center">
                        <div class="pb-1 font-semibold text-lg">Top Health</div>
                        <div id="th1" class=""></div>
                        <div id="th2" class=""></div>
                        <div id="th3" class=""></div>
                        <div id="th4" class=""></div>
                        <div id="th5" class=""></div>
                    </div>
                </div>
            </div>
        </section>

        <!--Color Key-->
        <div class="h-2 bg-gray-300"></div>
        <div class="h-4 w-full bg-gray-300 flex justify-center text-center">
            <div class="pr-4 text-right w-1/4 text-xs font-semibold">24 Hour Negative</div>
            <div class="w-1/2 h-full" style="background:linear-gradient(to right, #E55451, #FFB8BF, #A0D6B4, #54C571 )"></div>
            <div class="pl-4 text-left w-1/4 text-xs font-semibold">24 Hour Positive</div>
        </div>

        <section>
            <!-- TradingView Widget BEGIN -->
            <div class="pr-8 pl-8 md:pr-36 md:pl-36 lg:pr-72 lg:pl-72 pt-12 pb-6">
                <div class="text-xl font-bold pb-6 text-center">Check Out Other Stocks!</div>
                <div class="tradingview-widget-copyright">
                    <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
                        <span class="blue-text">Track all markets on TradingView</span>
                    </a>
                </div>
                <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                <script type="text/javascript">
                    new TradingView.widget({
                        "symbol": "NASDAQ:MARA",
                        "interval": "D",
                        "timezone": "Etc/UTC",
                        "theme": "light",
                        "style": "1",
                        "locale": "en",
                        "toolbar_bg": "#f1f3f6",
                        "enable_publishing": false,
                        "allow_symbol_change": true,
                        "width": "full",
                        "height": "500"
                    });
                </script>
                <br /><br />
            </div>
        </section>

        <section>
            <div class="w-full h-24 flex items-center justify-center bg-black">
                <div class="text-white text-xl font-semibold text-center">
                    Crypto data brought to you by CoinGecko | Stock data brought to you by Finnhub
                </div>
            </div>
        </section>
        
        
        
        


        <script>
            //Getting 'Indice' prices. These are not actually the indices, they are ETF's (Exchange Traded Funds) that are 1 to 1 in price to the indices.
            function updateIndexPrices() {
                axios.get('https://bladewebsite-99f6caf250e5.herokuapp.com/api/indexPrices')
                    .then((response) => {
                        const data = response.data;
        
                        if (data && Array.isArray(data)) {
                            let html = '';
                            data.forEach((stock) => {
                                const symbol = stock.symbol;
                                const name = stock.name;
                                const price = stock.close;
                                const change24h = stock.change_24h;
        
                                if (change24h < 0) {
                                    html += '<div style="color:red;">';
                                } else {
                                    html += '<div style="color: #54C571;">';
                                }
                                
                                html += `<div>${name} ${change24h.toFixed(2)}%</div>`;
                                html += `</div>`;
                            });
        
                            document.getElementById('index-prices-container').innerHTML = html; // Update the container with index data
                            document.getElementById('dropdown-index-container').innerHTML = html; // Update the container with index data
                        } else {
                            document.getElementById('index-prices-container').innerText = 'Error retrieving index prices.';
                            document.getElementById('dropdown-index-container').innerHTML = html; // Update the container with index data
                        }
                    })
                    .catch((error) => {
                        console.error('Error retrieving index prices:', error);
                        document.getElementById('index-prices-container').innerText = 'Error retrieving index prices.';
                    });
            }

            //function for showing indicies on mobile
            function toggleDropdown() {
                const dropdownContainer = document.getElementById('dropdown-index-container');
                dropdownContainer.classList.toggle('hidden');
                dropdownContainer.classList.toggle('fixed');
            }

            // Function to hide dropdown when screen size is increased
            function hideDropdownOnResize() {
                const screenWidth = window.innerWidth;
                if (screenWidth >= 640) {
                    const dropdownContainer = document.getElementById('dropdown-index-container');
                    dropdownContainer.classList.add('hidden');
                }
            }





            function updateCryptoPrices() {
                axios.get('https://bladewebsite-99f6caf250e5.herokuapp.com/api/cryptodata')
                    .then((response) => {
                        const data = response.data;
                        let count= 0;
                        if (Array.isArray(data) && data.length > 0) {
                            for (let i = 0; i < data.length; i++) { // Loop through the first 5 cryptocurrencies
                                const coin = data[i];
                                const name = coin.name;
                                const symbol = coin.symbol.toUpperCase();
                                const price = coin.current_price;
                                const marketCap = coin.market_cap;
                                const percentChange1h = coin.price_change_percentage_1h_in_currency.toFixed(2);
                                const percentChange24h = coin.price_change_percentage_24h_in_currency.toFixed(2);
                                if (name === 'Tether' || name === 'USDC' || name === 'Lido Staked Ether' || name === 'BNB') {
                                    continue;
                                }

                                // Get the appropriate div element for the current cryptocurrency
                                const cryptoBox = document.getElementById(`mc${count + 1}`); // Update the ID to match the box IDs
                                let color = "";

                                if (percentChange24h < -3) {
                                   color += "E55451";
                                } else if (percentChange24h > 3) {
                                    color += "54C571";
                                } else if(percentChange24h > 0){
                                    color += "A0D6B4";
                                } else{
                                    color += "FFB8BF";
                                }

                                let size = "text-lg";
                                if(name.length + symbol.length + 1 > 13){
                                    size = "text-md";
                                }
                                if(name.length + symbol.length + 1 > 26){
                                    size = "text-sm";
                                }

                                // Check if the box exists before updating its content
                                if (cryptoBox) {
                                    let html = '';
                                    html += `
                                        <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                            <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                                <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                                <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                            </div>
                                            <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                                <div>24h: <strong>${percentChange24h}%</strong></div>
                                                <div>1h: <strong>${percentChange1h}%</strong></div>
                                                <div>Market Cap: <strong>${formatMarketCap(marketCap)}</strong></div>
                                            </div>
                                        </div>`;
                                    cryptoBox.innerHTML = html;
                                }
                                count++;

                            }
                        } else {
                            console.error('Error retrieving cryptocurrency prices.');
                        }
                    })
                    .catch((error) => {
                        console.error('Error retrieving cryptocurrency data:', error);
                    });
            }

            function updateTopCryptoPrices() {
                axios.get('https://bladewebsite-99f6caf250e5.herokuapp.com/api/topCryptoData')
                    .then((response) => {
                        const data = response.data;
                        const testdata = response.data;
                        let count = 0;
                        if (Array.isArray(data) && data.length > 0) {
                            // Sort the data based on the percentage change in the last 24 hours
                            data.sort((a, b) => b.price_change_percentage_24h - a.price_change_percentage_24h);
                            // Take the top 10 cryptocurrencies
                            const top5Data = data.slice(0, 5);
                            data.sort((b, a) => b.price_change_percentage_24h - a.price_change_percentage_24h);
                            const worst5Data = data.slice(0, 5);             
                            testdata.sort((b, a) => a.price_change_percentage_1h_in_currency - b.price_change_percentage_1h_in_currency);
                            const hourtop5Data = testdata.slice(0, 5);
                            const hourworst5Data = testdata.slice(-5);
                            
                            let defi = Array(5);
                            let meme = Array(5);
                            let layerTwos = Array(5);
                            let gaming = Array(5);
                            let ai = Array(5);
                            //iterate and populate
                            for(let i = 0; i < data.length; i++){
                                let val = data[i];
                                //defi
                                if(val.name === "Uniswap"){
                                    defi[0] = val;
                                }                                
                                if(val.name === "Chainlink"){
                                    defi[1] = val;
                                }                                
                                if(val.name === "Dai"){
                                    defi[2] = val;
                                }                               
                                if(val.name === "The Graph"){
                                    defi[3] = val;
                                }                                
                                if(val.name === "Synthetix Network"){
                                    defi[4] = val;
                                }
                                //meme
                                if(val.name === "Dogecoin"){
                                    meme[0] = val;
                                }                                
                                if(val.name === "Shiba Inu"){
                                    meme[1] = val;
                                }                                
                                if(val.name === "Pepe"){
                                    meme[2] = val;
                                }                                
                                if(val.name === "Bonk"){
                                    meme[3] = val;
                                }                                
                                if(val.name === "dogwifhat"){
                                    meme[4] = val;
                                }
                                //layerTwos
                                if(val.name === "Polygon"){
                                    layerTwos[0] = val;
                                }                                
                                if(val.name === "Optimism"){
                                    layerTwos[1] = val;
                                }                                
                                if(val.name === "Mantle"){
                                    layerTwos[2] = val;
                                }                                
                                if(val.name === "Arbitrum"){
                                    layerTwos[3] = val;
                                }                                
                                if(val.name === "Starknet"){
                                    layerTwos[4] = val;
                                }
                                //gaming
                                if(val.name === "Immutable"){
                                    gaming[0] = val;
                                }                                
                                if(val.name === "Beam"){
                                    gaming[1] = val;
                                }                                
                                if(val.name === "The Sandbox"){
                                    gaming[2] = val;
                                }                                
                                if(val.name === "GALA"){
                                    gaming[3] = val;
                                }                                
                                if(val.name === "Axie Infinity"){
                                    gaming[4] = val;
                                }
                                //ai
                                if(val.name === "Bittensor"){
                                    ai[0] = val;
                                }                                
                                if(val.name === "Render"){
                                    ai[1] = val;
                                }                                
                                if(val.name === "Fetch.ai"){
                                    ai[2] = val;
                                }                                
                                if(val.name === "SingularityNET"){
                                    ai[3] = val;
                                }                                
                                if(val.name === "Akash Network"){
                                    ai[4] = val;
                                }
                            }

                            //defi loop
                            for (let i = 0; i < defi.length; i++) {
                                const coin = defi[i];
                                const name = coin.name;
                                const symbol = coin.symbol.toUpperCase();
                                const price = coin.current_price;
                                const marketCap = coin.market_cap;
                                const percentChange1h = coin.price_change_percentage_1h_in_currency.toFixed(2);
                                const percentChange24h = coin.price_change_percentage_24h_in_currency.toFixed(2);

                                // Get the appropriate div element for the current cryptocurrency
                                const cryptoBox = document.getElementById(`df${count + 1}`); // Update the ID to match the box IDs
                                let color = "";

                                if (percentChange24h < -3) {
                                   color += "E55451";
                                } else if (percentChange24h > 3) {
                                    color += "54C571";
                                } else if(percentChange24h > 0){
                                    color += "A0D6B4";
                                } else{
                                    color += "FFB8BF";
                                }

                                let size = "text-lg";
                                if(name.length + symbol.length + 1 > 13){
                                    size = "text-md";
                                } if(name.length + symbol.length + 1 > 26){
                                    size = "text-sm";
                                }

                                // Check if the box exists before updating its content
                                if (cryptoBox) {
                                    let html = '';
                                    html += `
                                        <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                            <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                                <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                                <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                            </div>
                                            <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                                <div>24h: <strong>${percentChange24h}%</strong></div>
                                                <div>1h: <strong>${percentChange1h}%</strong></div>
                                                <div>Market Cap: <strong>${formatMarketCap(marketCap)}</strong></div>
                                            </div>
                                        </div>`;
                                    cryptoBox.innerHTML = html;
                                }
                                count++;
                            }

                            count = 0;


                            //meme loop
                            for (let i = 0; i < meme.length; i++) {
                                const coin = meme[i];
                                const name = coin.name;
                                const symbol = coin.symbol.toUpperCase();
                                const price = coin.current_price;
                                const marketCap = coin.market_cap;
                                const percentChange1h = coin.price_change_percentage_1h_in_currency.toFixed(2);
                                const percentChange24h = coin.price_change_percentage_24h_in_currency.toFixed(2);

                                // Get the appropriate div element for the current cryptocurrency
                                const cryptoBox = document.getElementById(`m${count + 1}`); // Update the ID to match the box IDs
                                let color = "";

                                if (percentChange24h < -3) {
                                   color += "E55451";
                                } else if (percentChange24h > 3) {
                                    color += "54C571";
                                } else if(percentChange24h > 0){
                                    color += "A0D6B4";
                                } else{
                                    color += "FFB8BF";
                                }

                                let size = "text-lg";
                                if(name.length + symbol.length + 1 > 13){
                                    size = "text-md";
                                } if(name.length + symbol.length + 1 > 26){
                                    size = "text-sm";
                                }

                                // Check if the box exists before updating its content
                                if (cryptoBox) {
                                    let html = '';
                                    html += `
                                        <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                            <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                                <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                                <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                            </div>
                                            <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                                <div>24h: <strong>${percentChange24h}%</strong></div>
                                                <div>1h: <strong>${percentChange1h}%</strong></div>
                                                <div>Market Cap: <strong>${formatMarketCap(marketCap)}</strong></div>
                                            </div>
                                        </div>`;
                                    cryptoBox.innerHTML = html;
                                }
                                count++;
                            }

                            count = 0;
                        
                            //layerTwo's loop
                            for (let i = 0; i < layerTwos.length; i++) {
                                const coin = layerTwos[i];
                                const name = coin.name;
                                const symbol = coin.symbol.toUpperCase();
                                const price = coin.current_price;
                                const marketCap = coin.market_cap;
                                const percentChange1h = coin.price_change_percentage_1h_in_currency.toFixed(2);
                                const percentChange24h = coin.price_change_percentage_24h_in_currency.toFixed(2);

                                // Get the appropriate div element for the current cryptocurrency
                                const cryptoBox = document.getElementById(`tl${count + 1}`); // Update the ID to match the box IDs
                                let color = "";

                                if (percentChange24h < -3) {
                                   color += "E55451";
                                } else if (percentChange24h > 3) {
                                    color += "54C571";
                                } else if(percentChange24h > 0){
                                    color += "A0D6B4";
                                } else{
                                    color += "FFB8BF";
                                }

                                let size = "text-lg";
                                if(name.length + symbol.length + 1 > 13){
                                    size = "text-md";
                                } if(name.length + symbol.length + 1 > 26){
                                    size = "text-sm";
                                }

                                // Check if the box exists before updating its content
                                if (cryptoBox) {
                                    let html = '';
                                    html += `
                                        <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                            <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                                <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                                <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                            </div>
                                            <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                                <div>24h: <strong>${percentChange24h}%</strong></div>
                                                <div>1h: <strong>${percentChange1h}%</strong></div>
                                                <div>Market Cap: <strong>${formatMarketCap(marketCap)}</strong></div>
                                            </div>
                                        </div>`;
                                    cryptoBox.innerHTML = html;
                                }
                                count++;
                            }

                            count = 0;

                            //Gaming loop
                            for (let i = 0; i < gaming.length; i++) {
                                const coin = gaming[i];
                                const name = coin.name;
                                const symbol = coin.symbol.toUpperCase();
                                const price = coin.current_price;
                                const marketCap = coin.market_cap;
                                const percentChange1h = coin.price_change_percentage_1h_in_currency.toFixed(2);
                                const percentChange24h = coin.price_change_percentage_24h_in_currency.toFixed(2);

                                // Get the appropriate div element for the current cryptocurrency
                                const cryptoBox = document.getElementById(`tg${count + 1}`); // Update the ID to match the box IDs
                                let color = "";

                                if (percentChange24h < -3) {
                                   color += "E55451";
                                } else if (percentChange24h > 3) {
                                    color += "54C571";
                                } else if(percentChange24h > 0){
                                    color += "A0D6B4";
                                } else{
                                    color += "FFB8BF";
                                }

                                let size = "text-lg";
                                if(name.length + symbol.length + 1 > 13){
                                    size = "text-md";
                                } if(name.length + symbol.length + 1 > 26){
                                    size = "text-sm";
                                }

                                // Check if the box exists before updating its content
                                if (cryptoBox) {
                                    let html = '';
                                    html += `
                                        <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                            <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                                <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                                <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                            </div>
                                            <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                                <div>24h: <strong>${percentChange24h}%</strong></div>
                                                <div>1h: <strong>${percentChange1h}%</strong></div>
                                                <div>Market Cap: <strong>${formatMarketCap(marketCap)}</strong></div>
                                            </div>
                                        </div>`;
                                    cryptoBox.innerHTML = html;
                                }
                                count++;
                            }

                            count = 0;

                            //ai loop
                            for (let i = 0; i < ai.length; i++) {
                                const coin = ai[i];
                                const name = coin.name;
                                const symbol = coin.symbol.toUpperCase();
                                const price = coin.current_price;
                                const marketCap = coin.market_cap;
                                const percentChange1h = coin.price_change_percentage_1h_in_currency.toFixed(2);
                                const percentChange24h = coin.price_change_percentage_24h_in_currency.toFixed(2);

                                // Get the appropriate div element for the current cryptocurrency
                                const cryptoBox = document.getElementById(`ai${count + 1}`); // Update the ID to match the box IDs
                                let color = "";

                                if (percentChange24h < -3) {
                                   color += "E55451";
                                } else if (percentChange24h > 3) {
                                    color += "54C571";
                                } else if(percentChange24h > 0){
                                    color += "A0D6B4";
                                } else{
                                    color += "FFB8BF";
                                }

                                let size = "text-lg";
                                if(name.length + symbol.length + 1 > 13){
                                    size = "text-md";
                                } if(name.length + symbol.length + 1 > 26){
                                    size = "text-sm";
                                }

                                // Check if the box exists before updating its content
                                if (cryptoBox) {
                                    let html = '';
                                    html += `
                                        <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                            <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                                <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                                <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                            </div>
                                            <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                                <div>24h: <strong>${percentChange24h}%</strong></div>
                                                <div>1h: <strong>${percentChange1h}%</strong></div>
                                                <div>Market Cap: <strong>${formatMarketCap(marketCap)}</strong></div>
                                            </div>
                                        </div>`;
                                    cryptoBox.innerHTML = html;
                                }
                                count++;
                            }

                            count = 0;

                            for (let i = 0; i < top5Data.length; i++) {
                                const coin = top5Data[i];
                                const name = coin.name;
                                const symbol = coin.symbol.toUpperCase();
                                const price = coin.current_price;
                                const marketCap = coin.market_cap;
                                const percentChange1h = coin.price_change_percentage_1h_in_currency.toFixed(2);
                                const percentChange24h = coin.price_change_percentage_24h_in_currency.toFixed(2);

                                // Get the appropriate div element for the current cryptocurrency
                                const cryptoBox = document.getElementById(`g${count + 1}`); // Update the ID to match the box IDs
                                let color = "";

                                if (percentChange24h < -3) {
                                   color += "E55451";
                                } else if (percentChange24h > 3) {
                                    color += "54C571";
                                } else if(percentChange24h > 0){
                                    color += "A0D6B4";
                                } else{
                                    color += "FFB8BF";
                                }

                                let size = "text-lg";
                                if(name.length + symbol.length + 1 > 13){
                                    size = "text-md";
                                } if(name.length + symbol.length + 1 > 26){
                                    size = "text-sm";
                                }

                                // Check if the box exists before updating its content
                                if (cryptoBox) {
                                    let html = '';
                                    html += `
                                        <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                            <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                                <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                                <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                            </div>
                                            <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                                <div>24h: <strong>${percentChange24h}%</strong></div>
                                                <div>1h: <strong>${percentChange1h}%</strong></div>
                                                <div>Market Cap: <strong>${formatMarketCap(marketCap)}</strong></div>
                                            </div>
                                        </div>`;
                                    cryptoBox.innerHTML = html;
                                }
                                count++;
                            }
                            count = 0;

                            //Largest hour gain loop
                            for (let i = 0; i < hourtop5Data.length; i++) {
                                const coin = hourtop5Data[i];
                                const name = coin.name;
                                const symbol = coin.symbol.toUpperCase();
                                const price = coin.current_price;
                                const marketCap = coin.market_cap;
                                const percentChange1h = coin.price_change_percentage_1h_in_currency.toFixed(2);
                                const percentChange24h = coin.price_change_percentage_24h_in_currency.toFixed(2);

                                // Get the appropriate div element for the current cryptocurrency
                                const cryptoBox = document.getElementById(`lg${count + 1}`); // Update the ID to match the box IDs
                                let color = "";

                                if (percentChange1h < -3) {
                                   color += "E55451";
                                } else if (percentChange1h > 3) {
                                    color += "54C571";
                                } else if(percentChange1h > 0){
                                    color += "A0D6B4";
                                } else{
                                    color += "FFB8BF";
                                }

                                let size = "text-lg";
                                if(name.length + symbol.length + 1 > 13){
                                    size = "text-md";
                                } if(name.length + symbol.length + 1 > 26){
                                    size = "text-sm";
                                }

                                // Check if the box exists before updating its content
                                if (cryptoBox) {
                                    let html = '';
                                    html += `
                                        <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                            <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                                <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                                <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                            </div>
                                            <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                                <div>24h: <strong>${percentChange24h}%</strong></div>
                                                <div>1h: <strong>${percentChange1h}%</strong></div>
                                                <div>Market Cap: <strong>${formatMarketCap(marketCap)}</strong></div>
                                            </div>
                                        </div>`;
                                    cryptoBox.innerHTML = html;
                                }
                                count++;
                            }

                            count = 0;

                            //Largest hour loss loop
                            for (let i = 0; i < hourworst5Data.length; i++) {
                                const coin = hourworst5Data[i];
                                const name = coin.name;
                                const symbol = coin.symbol.toUpperCase();
                                const price = coin.current_price;
                                const marketCap = coin.market_cap;
                                const percentChange1h = coin.price_change_percentage_1h_in_currency.toFixed(2);
                                const percentChange24h = coin.price_change_percentage_24h_in_currency.toFixed(2);

                                // Get the appropriate div element for the current cryptocurrency
                                const cryptoBox = document.getElementById(`ll${count + 1}`); // Update the ID to match the box IDs
                                let color = "";

                                if (percentChange1h < -3) {
                                   color += "E55451";
                                } else if (percentChange1h > 3) {
                                    color += "54C571";
                                } else if(percentChange1h > 0){
                                    color += "A0D6B4";
                                } else{
                                    color += "FFB8BF";
                                }

                                let size = "text-lg";
                                if(name.length + symbol.length + 1 > 13){
                                    size = "text-md";
                                } if(name.length + symbol.length + 1 > 26){
                                    size = "text-sm";
                                }

                                // Check if the box exists before updating its content
                                if (cryptoBox) {
                                    let html = '';
                                    html += `
                                        <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                            <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                                <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                                <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                            </div>
                                            <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                                <div>24h: <strong>${percentChange24h}%</strong></div>
                                                <div>1h: <strong>${percentChange1h}%</strong></div>
                                                <div>Market Cap: <strong>${formatMarketCap(marketCap)}</strong></div>
                                            </div>
                                        </div>`;
                                    cryptoBox.innerHTML = html;
                                }
                                count++;
                            }

                            count = 0;

                            for (let i = 0; i < worst5Data.length; i++) {
                                const coin = worst5Data[i];
                                const name = coin.name;
                                const symbol = coin.symbol.toUpperCase();
                                const price = coin.current_price;
                                const marketCap = coin.market_cap;
                                const percentChange1h = coin.price_change_percentage_1h_in_currency.toFixed(2);
                                const percentChange24h = coin.price_change_percentage_24h_in_currency.toFixed(2);

                                // Get the appropriate div element for the current cryptocurrency
                                const cryptoBox = document.getElementById(`l${count + 1}`); // Update the ID to match the box IDs
                                let color = "";

                                if (percentChange24h < -3) {
                                   color += "E55451";
                                } else if (percentChange24h > 3) {
                                    color += "54C571";
                                } else if(percentChange24h > 0){
                                    color += "A0D6B4";
                                } else{
                                    color += "FFB8BF";
                                }

                                let size = "text-lg";
                                if(name.length + symbol.length + 1 > 13){
                                    size = "text-md";
                                } if(name.length + symbol.length + 1 > 26){
                                    size = "text-sm";
                                }

                                // Check if the box exists before updating its content
                                if (cryptoBox) {
                                    let html = '';
                                    html += `
                                        <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                            <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                                <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                                <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                            </div>
                                            <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                                <div>24h: <strong>${percentChange24h}%</strong></div>
                                                <div>1h: <strong>${percentChange1h}%</strong></div>
                                                <div>Market Cap: <strong>${formatMarketCap(marketCap)}</strong></div>
                                            </div>
                                        </div>`;
                                    cryptoBox.innerHTML = html;
                                }
                                count++;
                            }
                        } else {
                            console.error('Error retrieving cryptocurrency prices.');
                        }
                    })
                    .catch((error) => {
                        console.error('Error retrieving top cryptocurrency data:', error);
                    });
            }


            function updateStockPrices() {
            axios.get('https://bladewebsite-99f6caf250e5.herokuapp.com/api/TechPrices')
                .then((response) => {
                    const data = response.data;
                    let count = 0;
                    if (data && Array.isArray(data)) {
                        const topTech = data.slice(0, 5);
                        const topEV = data.slice(5, 10);
                        const topChip = data.slice(10, 15);
                        const topCryptoMiners = data.slice(15, 20);
                        const topAI = data.slice(20, 25);
                        const topEnergy = data.slice(25, 30);
                        const topBanking = data.slice(30, 35);
                        const topHealth = data.slice(35, 40);

                        let html = '';
                        //tech
                        for (let i = 0; i < topTech.length; i++) {
                            const stock = topTech[i];
                            const symbol = stock.symbol.toUpperCase();
                            let name = stock.name;
                            const price = stock.close;
                            const change24h = stock.change_24h;
                            const hod = stock.hod;
                            const lod = stock.lod;
                            const stockBox = document.getElementById(`toptech${count + 1}`);

                            let color = "";

                            if (change24h < -3) {
                            color += "E55451";
                            } else if (change24h > 3) {
                                color += "54C571";
                            } else if(change24h > 0){
                                color += "A0D6B4";
                            } else{
                                color += "FFB8BF";
                            }

                            let size = "text-lg";
                            if(name.length + symbol.length + 1 > 13){
                                size = "text-md";
                            }
                            if(name.length + symbol.length + 1 > 26){
                                size = "text-sm";
                            }

                            // Check if the box exists before updating its content
                            if (stockBox) {
                                let html = '';
                                html += `
                                    <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                        <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                            <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                            <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                        </div>
                                        <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                            <div>24h: <strong>${change24h.toFixed(2)}%</strong></div>
                                            <div>Daily High: <strong>$${hod.toFixed(2)}</strong></div>
                                            <div>Daily Low: <strong>$${lod.toFixed(2)}</strong></div>
                                        </div>
                                    </div>`;
                                stockBox.innerHTML = html;
                            }
                            count++;
                        };
                        count = 0;

                        //ev
                        for (let i = 0; i < topEV.length; i++) {
                            const stock = topEV[i];
                            const symbol = stock.symbol.toUpperCase();
                            let name = stock.name;
                            const price = stock.close;
                            const change24h = stock.change_24h;
                            const hod = stock.hod;
                            const lod = stock.lod;
                            const stockBox = document.getElementById(`ev${count + 1}`);

                            let color = "";

                            if (change24h < -3) {
                            color += "E55451";
                            } else if (change24h > 3) {
                                color += "54C571";
                            } else if(change24h > 0){
                                color += "A0D6B4";
                            } else{
                                color += "FFB8BF";
                            }

                            let size = "text-lg";
                            if(name.length + symbol.length + 1 > 13){
                                size = "text-md";
                            }
                            if(name.length + symbol.length + 1 > 26){
                                size = "text-sm";
                            }

                            // Check if the box exists before updating its content
                            if (stockBox) {
                                let html = '';
                                html += `
                                    <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                        <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                            <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                            <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                        </div>
                                        <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                            <div>24h: <strong>${change24h.toFixed(2)}%</strong></div>
                                            <div>Daily High: <strong>$${hod.toFixed(2)}</strong></div>
                                            <div>Daily Low: <strong>$${lod.toFixed(2)}</strong></div>
                                        </div>
                                    </div>`;
                                stockBox.innerHTML = html;
                            }
                            count++;
                        };
                        count = 0;
                        
                        //chip
                        for (let i = 0; i < topChip.length; i++) {
                            const stock = topChip[i];
                            const symbol = stock.symbol.toUpperCase();
                            let name = stock.name;
                            const price = stock.close;
                            const change24h = stock.change_24h;
                            const hod = stock.hod;
                            const lod = stock.lod;
                            const stockBox = document.getElementById(`cm${count + 1}`);

                            let color = "";

                            if (change24h < -3) {
                            color += "E55451";
                            } else if (change24h > 3) {
                                color += "54C571";
                            } else if(change24h > 0){
                                color += "A0D6B4";
                            } else{
                                color += "FFB8BF";
                            }

                            let size = "text-lg";
                            if(name.length + symbol.length + 1 > 13){
                                size = "text-md";
                            }
                            if(name.length + symbol.length + 1 > 26){
                                size = "text-sm";
                            }

                            // Check if the box exists before updating its content
                            if (stockBox) {
                                let html = '';
                                html += `
                                    <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                        <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                            <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                            <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                        </div>
                                        <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                            <div>24h: <strong>${change24h.toFixed(2)}%</strong></div>
                                            <div>Daily High: <strong>$${hod.toFixed(2)}</strong></div>
                                            <div>Daily Low: <strong>$${lod.toFixed(2)}</strong></div>
                                        </div>
                                    </div>`;
                                stockBox.innerHTML = html;
                            }
                            count++;
                        };
                        count = 0;

                        //crypto miners
                        for (let i = 0; i < topCryptoMiners.length; i++) {
                            const stock = topCryptoMiners[i];
                            const symbol = stock.symbol.toUpperCase();
                            let name = stock.name;
                            const price = stock.close;
                            const change24h = stock.change_24h;
                            const hod = stock.hod;
                            const lod = stock.lod;
                            const stockBox = document.getElementById(`miner${count + 1}`);

                            let color = "";

                            if (change24h < -3) {
                            color += "E55451";
                            } else if (change24h > 3) {
                                color += "54C571";
                            } else if(change24h > 0){
                                color += "A0D6B4";
                            } else{
                                color += "FFB8BF";
                            }

                            let size = "text-lg";
                            if(name.length + symbol.length + 1 > 13){
                                size = "text-md";
                            }
                            if(name.length + symbol.length + 1 > 26){
                                size = "text-sm";
                            }

                            // Check if the box exists before updating its content
                            if (stockBox) {
                                let html = '';
                                html += `
                                    <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                        <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                            <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                            <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                        </div>
                                        <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                            <div>24h: <strong>${change24h.toFixed(2)}%</strong></div>
                                            <div>Daily High: <strong>$${hod.toFixed(2)}</strong></div>
                                            <div>Daily Low: <strong>$${lod.toFixed(2)}</strong></div>
                                        </div>
                                    </div>`;
                                stockBox.innerHTML = html;
                            }
                            count++;
                        };
                        count = 0;

                        //ai
                        for (let i = 0; i < topAI.length; i++) {
                            const stock = topAI[i];
                            const symbol = stock.symbol.toUpperCase();
                            let name = stock.name;
                            const price = stock.close;
                            const change24h = stock.change_24h;
                            const hod = stock.hod;
                            const lod = stock.lod;
                            const stockBox = document.getElementById(`aistock${count + 1}`);

                            let color = "";

                            if (change24h < -3) {
                            color += "E55451";
                            } else if (change24h > 3) {
                                color += "54C571";
                            } else if(change24h > 0){
                                color += "A0D6B4";
                            } else{
                                color += "FFB8BF";
                            }

                            let size = "text-lg";
                            if(name.length + symbol.length + 1 > 13){
                                size = "text-md";
                            }
                            if(name.length + symbol.length + 1 > 26){
                                size = "text-sm";
                            }

                            // Check if the box exists before updating its content
                            if (stockBox) {
                                let html = '';
                                html += `
                                    <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                        <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                            <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                            <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                        </div>
                                        <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                            <div>24h: <strong>${change24h.toFixed(2)}%</strong></div>
                                            <div>Daily High: <strong>$${hod.toFixed(2)}</strong></div>
                                            <div>Daily Low: <strong>$${lod.toFixed(2)}</strong></div>
                                        </div>
                                    </div>`;
                                stockBox.innerHTML = html;
                            }
                            count++;
                        };
                        count = 0;

                        //energy
                        for (let i = 0; i < topEnergy.length; i++) {
                            const stock = topEnergy[i];
                            const symbol = stock.symbol.toUpperCase();
                            let name = stock.name;
                            const price = stock.close;
                            const change24h = stock.change_24h;
                            const hod = stock.hod;
                            const lod = stock.lod;
                            const stockBox = document.getElementById(`te${count + 1}`);

                            let color = "";

                            if (change24h < -3) {
                            color += "E55451";
                            } else if (change24h > 3) {
                                color += "54C571";
                            } else if(change24h > 0){
                                color += "A0D6B4";
                            } else{
                                color += "FFB8BF";
                            }

                            let size = "text-lg";
                            if(name.length + symbol.length + 1 > 13){
                                size = "text-md";
                            }
                            if(name.length + symbol.length + 1 > 26){
                                size = "text-sm";
                            }

                            // Check if the box exists before updating its content
                            if (stockBox) {
                                let html = '';
                                html += `
                                    <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                        <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                            <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                            <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                        </div>
                                        <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                            <div>24h: <strong>${change24h.toFixed(2)}%</strong></div>
                                            <div>Daily High: <strong>$${hod.toFixed(2)}</strong></div>
                                            <div>Daily Low: <strong>$${lod.toFixed(2)}</strong></div>
                                        </div>
                                    </div>`;
                                stockBox.innerHTML = html;
                            }
                            count++;
                        };
                        count = 0;

                        //banking
                        for (let i = 0; i < topBanking.length; i++) {
                            const stock = topBanking[i];
                            const symbol = stock.symbol.toUpperCase();
                            let name = stock.name;
                            const price = stock.close;
                            const change24h = stock.change_24h;
                            const hod = stock.hod;
                            const lod = stock.lod;
                            const stockBox = document.getElementById(`tb${count + 1}`);

                            let color = "";

                            if (change24h < -3) {
                            color += "E55451";
                            } else if (change24h > 3) {
                                color += "54C571";
                            } else if(change24h > 0){
                                color += "A0D6B4";
                            } else{
                                color += "FFB8BF";
                            }

                            let size = "text-lg";
                            if(name.length + symbol.length + 1 > 13){
                                size = "text-md";
                            }
                            if(name.length + symbol.length + 1 > 26){
                                size = "text-sm";
                            }

                            // Check if the box exists before updating its content
                            if (stockBox) {
                                let html = '';
                                html += `
                                    <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                        <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                            <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                            <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                        </div>
                                        <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                            <div>24h: <strong>${change24h.toFixed(2)}%</strong></div>
                                            <div>Daily High: <strong>$${hod.toFixed(2)}</strong></div>
                                            <div>Daily Low: <strong>$${lod.toFixed(2)}</strong></div>
                                        </div>
                                    </div>`;
                                stockBox.innerHTML = html;
                            }
                            count++;
                        };
                        count = 0;

                        //health
                        for (let i = 0; i < topHealth.length; i++) {
                            const stock = topHealth[i];
                            const symbol = stock.symbol.toUpperCase();
                            let name = stock.name;
                            const price = stock.close;
                            const change24h = stock.change_24h;
                            const hod = stock.hod;
                            const lod = stock.lod;
                            const stockBox = document.getElementById(`th${count + 1}`);

                            let color = "";

                            if (change24h < -3) {
                            color += "E55451";
                            } else if (change24h > 3) {
                                color += "54C571";
                            } else if(change24h > 0){
                                color += "A0D6B4";
                            } else{
                                color += "FFB8BF";
                            }

                            let size = "text-lg";
                            if(name.length + symbol.length + 1 > 13){
                                size = "text-md";
                            }
                            if(name.length + symbol.length + 1 > 26){
                                size = "text-sm";
                            }

                            // Check if the box exists before updating its content
                            if (stockBox) {
                                let html = '';
                                html += `
                                    <div class="w-72 h-24 flex p-1" style="background-color: #${color};">
                                        <div class="flex flex-col w-1/2 h-full items-start justify-center">
                                            <div class="${size}"><strong>${name}</strong> ${symbol}</div>
                                            <div class="font-bold text-xl">$${price.toFixed(2)}</div>
                                        </div>
                                        <div class="flex flex-col w-1/2 h-full items-end text-sm justify-center">
                                            <div>24h: <strong>${change24h.toFixed(2)}%</strong></div>
                                            <div>Daily High: <strong>$${hod.toFixed(2)}</strong></div>
                                            <div>Daily Low: <strong>$${lod.toFixed(2)}</strong></div>
                                        </div>
                                    </div>`;
                                stockBox.innerHTML = html;
                            }
                            count++;
                        };

                    } else {
                        console.error('Error retrieving trending prices.');
                    }
                })
                .catch((error) => {
                    console.error('Error retrieving trending prices:', error);
                });
            }

                        
            function formatMarketCap(cap) {
                const abbrev = ['', 'K', 'M', 'B', 'T']; // Add more abbreviations as needed
                const decimals = 2;

                const magnitude = Math.floor(Math.log10(cap) / 3);
                const roundedCap = (cap / Math.pow(1000, magnitude)).toFixed(decimals);

                return `${roundedCap}${abbrev[magnitude]}`;
            }


            updateIndexPrices()
            updateCryptoPrices()
            updateTopCryptoPrices()
            updateStockPrices()


            setInterval(updateCryptoPrices, 300000); // Fetch crypto data every 5 minutes (300000 milliseconds)
            setInterval(updateTopCryptoPrices, 300000); // Fetch top Crypto Prices every 5 minutes (300000 milliseconds)
            setInterval(updateIndexPrices, 300000); // Fetch index prices every 5 minutes. (ETF's for each index)
            setInterval(updateStockPrices, 300000); // Fetch tech stock prices every 5 minutes (300000 milliseconds)


            document.getElementById('menu-toggle').addEventListener('click', toggleDropdown);
            window.addEventListener('resize', hideDropdownOnResize); // Listen for screen size changes
        </script>
        


    </body>
</html>
